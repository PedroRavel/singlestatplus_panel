{"version":3,"sources":["../src/singlestatplus_ctrl.js"],"names":["moment","$","_","kbn","config","TimeSeries","MetricsPanelCtrl","SingleStatPlusCtrl","$scope","$injector","panelDefaults","legend","show","values","pointCount","pointSize","prefix","postfix","current","next","sum","count","showValue","showNext","showSum","showGraph","fontSize","fontWeight","font","family","bgColor","graphChoice","barColor","graphOptions","chartData","tempData","singleSet","aliases","dataChoice","showAll","opacity","colors","gaugeOptions","series","grow","active","duration","gauges","gauge","min","max","background","color","border","shadow","size","margin","width","threshold","label","frame","layout","thresholdWidth","hMargin","vMargin","cell","value","barOptions","bars","barWidth","order","xaxis","tickLength","yaxis","grid","showGrid","borderWidth","hoverable","lineOptions","points","lines","fill","text","title","defaults","panel","events","on","onInitEditMode","bind","onDataReceived","render","colorNum","chooseGraph","length","chooseStat","addEditorTab","dataList","map","seriesHandler","setValues","removeGarbage","seriesData","datapoints","alias","target","flotpairs","getFlotPairs","nullPointMode","isEmpty","minThreshold","maxThreshold","self","find","d","stat","choice","i","found","forEach","splice","time","serie","push","lastPoint","last","lastValue","isArray","lastTime","date","Date","hours","getHours","minutes","getMinutes","seconds","getSeconds","substr","cData","Object","indexOf","data","currentValue","dropBy","drop","scope","elem","$placeHolder","$panelContainer","height","empty","statBar","each","css","statusColor","parseInt","String","replace","html","click","state","allChosen","selected","plot","findStat","prevPoint","event","pos","item","dataIndex","div","status","datapoint","position","top","pageY","left","pageX","padding","fadeIn","hide","templateUrl"],"mappings":"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","file":"singlestatplus_ctrl.js","sourcesContent":["\nimport moment from 'moment';\n\n\nimport $ from 'jquery';\nimport _ from 'lodash';\nimport 'jquery.flot';\nimport 'jquery.flot.gauge';\nimport 'jquery.flot.pie';\nimport 'jquery.flot.time';\nimport './orderBar.js'\n\nimport kbn from 'app/core/utils/kbn';\nimport config from 'app/core/config';\nimport TimeSeries from 'app/core/time_series2';\nimport {MetricsPanelCtrl} from 'app/plugins/sdk';\n\nexport class SingleStatPlusCtrl extends MetricsPanelCtrl {\n  constructor($scope,$injector){\n    super($scope,$injector);\n    const panelDefaults = {\n      legend: {\n        show: true, // disable/enable legend\n        values: true\n      },\n      pointCount:0,\n      pointSize: 10,\n      prefix: '',\n      postfix: '',\n      values:{\n        current:0,\n        next:0,\n        sum:0,\n        count:0,\n        showValue:true,\n        showNext: false,\n        showSum:false\n      },\n      showGraph:true,\n      fontSize: '25px',\n      fontWeight: '10px',\n      font: { family: '\"Helvetica Neue\", Helvetica, Arial, sans-serif' },\n      bgColor: null,\n      graphChoice:'bar',\n      barColor:'red',\n      graphOptions:{},\n      chartData:[],\n      tempData:{},\n      singleSet:{},\n      aliases:[],\n      dataChoice:'',\n      showAll:true,\n      opacity:false,\n      colors:['red','blue','lightgreen','yellow','cyan','orange','grey','purple','white','red','blue','green'],\n      gaugeOptions: {\n        legend: {\n          show:false\n        },\n        series:{\n          grow:{\n            active:true,\n            duration: 150\n          },\n          gauges:{\n            gauge:{\n              min:null,\n              max:null,\n              background: { color: 'grey' },\n              border: { color: null },\n              shadow: { show: false },\n              font: { size: 10, family: '\"Helvetica Neue\", Helvetica, Arial, sans-serif' },\n              margin:0,\n              width:25,\n              color:'red'\n            },\n            threshold:{\n              label: {\n                show: true,\n                margin: 0,\n                font: { size: 15 }\n              },\n              show: true,\n              width: 3,\n              margin:0\n            },\n            show:true,\n            frame: { show: false },\n            label: {\n              show: true,\n              font: {size:10, family: '\"Helvetica Neue\", Helvetica, Arial, sans-serif' },\n              margin:0\n            },\n            layout: { margin: 1, thresholdWidth: 0,hMargin:1,vMargin:1 },\n            cell: { border: { width: 0 } },\n            value:{\n              show:true,\n              font: { size: 15, family: '\"Helvetica Neue\", Helvetica, Arial, sans-serif' },\n              margin:0\n            }\n          }\n        }\n      },\n      barOptions:{\n        legend: {\n          show:false\n        },\n        series:{\n          bars:{\n            //fill:0.3,\n            show:true,\n            barWidth:.13,\n            order:1\n          }\n        },\n        xaxis:{\n          show:true,\n          tickLength:5,\n        },\n        yaxis:{\n          show:true,\n          tickLength:5\n        },\n        grid:{\n          showGrid:true,\n          borderWidth: 0,\n          hoverable: true\n        },\n        border:{\n          show:false\n        }\n      },\n      lineOptions:{\n        legend: {\n          show:false\n        },\n        xaxis:{\n          show:true,\n          tickLength:5,\n        },\n        yaxis:{\n          show:true,\n          tickLength:5\n        },\n        grid: {\n          showGrid:true,\n          hoverable: true,\n          borderWidth: 0\n        },\n        points:{\n          show:true\n        },\n        series:{\n          lines:{\n           fill:0.1,\n            show:true\n          }\n        }\n      },\n      text:{\n        title:'',\n        prefix:'',\n        postfix:''\n      }\n    }\n    _.defaults(this.panel, panelDefaults);\n    _.defaults(this.panel.legend, panelDefaults.legend);\n    this.events.on('init-edit-mode',this.onInitEditMode.bind(this));\n    this.events.on('data-received', this.onDataReceived.bind(this));\n    this.events.on('data-snapshot-load', this.onDataReceived.bind(this));\n    this.events.on('panel-initialized', this.render.bind(this));\n    this.colorNum = 0;\n    this.chooseGraph(this.panel.graphChoice);\n    if(this.panel.dataChoice.length !== 0){\n      this.chooseStat();\n    }\n  }\n\n  onInitEditMode() {\n    this.addEditorTab('Options','public/plugins/grafana-singlestatplus-panel/editor.html',2);\n  }\n\n  onDataReceived(dataList) {\n    this.series = dataList.map(this.seriesHandler.bind(this));\n\n    this.setValues();\n    this.removeGarbage();\n    this.render();\n  }\n\n  seriesHandler(seriesData) {\n    var series = new TimeSeries({\n      datapoints: seriesData.datapoints,\n      alias: seriesData.target,\n    });\n    series.flotpairs = series.getFlotPairs(this.panel.nullPointMode);\n\n    return series;\n  }\n\n  setGaugeThresholds(){\n    if(!_.isEmpty(this.panel.tempData)){\n      this.panel.tempData.gauges.gauge.min = this.panel.tempData.minThreshold;\n      this.panel.tempData.gauges.gauge.max = this.panel.tempData.maxThreshold;\n      this.panel.tempData.gauges.threshold.values[0].value = this.panel.tempData.minThreshold;\n      this.panel.tempData.gauges.threshold.values[2].value = this.panel.tempData.maxThreshold;\n    }\n    this.render();\n  }\n\n  chooseStat(){\n    var self = this;\n    _.find(self.panel.chartData,function(d){\n      if(d.label === self.panel.dataChoice){\n        self.panel.tempData = d;\n        return;\n      }\n    })\n    this.render();\n  }\n  findStat(stat){\n    var self = this;\n    _.find(self.panel.chartData,function(d){\n      if(d.label === stat){\n        self.panel.singleSet = d;\n        return;\n      }\n    })\n  }\n\n  setSSCount(){\n    if(this.panel.pointSize < 1){\n      this.panel.pointSize = 1;\n    } else if(this.panel.pointSize >= 30){\n      this.panel.pointSize = 30\n    }\n  }\n\n\n  chooseGraph(choice){\n\n    this.panel.graphChoice = choice;\n    if(this.panel.graphChoice === 'bar'){\n      this.panel.graphOptions = this.panel.barOptions;\n    } else if(this.panel.graphChoice === 'line') {\n      this.panel.graphOptions = this.panel.lineOptions;\n    } else {\n      this.panel.graphOptions = this.panel.gaugeOptions;\n    }\n    this.render();\n  }\n\n  removeGarbage(){\n    var self = this;\n     for(var i = 0; i < self.panel.chartData.length; i++){\n       var found = false;\n       self.panel.aliases.forEach(function(alias){\n        if(alias === self.panel.chartData[i].label){\n          found = true;\n          return;\n        }\n      })\n      if(!found){\n        self.panel.chartData.splice(i,1);\n      }\n    }\n  }\n\n  changeColor(){\n    this.panel.tempData.gauges.threshold.values[1].color = this.panel.tempData.color;\n    this.render();\n  }\n\n  setValues() {\n    var self = this;\n    if (this.series && this.series.length > 0) {\n      this.panel.aliases.length = 0;\n      var time;\n      this.series.forEach(function(serie){\n        var found = false;\n        self.panel.aliases.push(serie.alias);\n        var lastPoint = _.last(serie.datapoints)\n        var lastValue = _.isArray(lastPoint) ? lastPoint[0] : null;\n        var lastTime = _.isArray(lastPoint) ? lastPoint[1] : null;\n        var date = new Date(lastTime);\n        var hours = date.getHours();\n        var minutes = \"0\" + date.getMinutes();\n        var seconds = \"0\" + date.getSeconds();\n        time = hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);\n        self.panel.time = time;\n        self.panel.chartData.forEach(function(cData){\n          if(Object.values(cData).indexOf(serie.alias) > -1){\n            cData.data.push([self.panel.pointCount,lastValue]);\n            cData.currentValue = [[self.panel.pointCount,lastValue]];\n            cData.gauges.threshold.values[1].value = lastValue;\n            self.panel.time = time;\n            found = true;\n          }\n          if(found){\n            return;\n          }\n        })\n        if(!found){\n          self.panel.chartData.push({\n            label:serie.alias,\n            data:[[self.panel.pointCount,lastValue]],\n            color:self.panel.colors[self.colorNum],\n            minThreshold:null,\n            maxThreshold:null,\n            currentValue:[[self.panel.pointCount,lastValue]],\n            time: time,\n            gauges:{\n              gauge:{\n                min:null,\n                max:null,\n              },\n              threshold:{\n                values:[{\n                  value:null,\n                  color: 'lightred'\n                },{\n                  value:lastValue,\n                  color: self.panel.colors[self.colorNum]\n                },{\n                  value:null,\n                  color: 'green'\n                }]\n              }\n            }\n          })\n          self.colorNum++;\n        }\n      })\n      for(var i = 0; i < this.panel.chartData.length; i++){\n        if(this.panel.chartData[i].data.length > this.panel.pointSize){\n          var dropBy = this.panel.chartData[i].data.length - this.panel.pointSize;\n          this.panel.chartData[i].data = _.drop(this.panel.chartData[i].data, dropBy);\n        }\n      }\n      this.panel.pointCount++;\n    }\n\n  }\n\n\n  link(scope, elem) {\n\n    this.events.on('render', () => {\n\n      const $placeHolder = elem.find('#placeholder');\n      const $panelContainer = elem.find('.panel-container');\n      var height = this.height ? this.height - 20 : 230\n\n      $placeHolder.empty();\n      var statBar = \"\";\n      var colors = [];\n      $(\"#statusbar\").find(\".stat\").each(function(){\n          colors.push($(this).css('color'));\n      })\n\n      for(var i = 0; i < this.panel.chartData.length; i++){\n        var statusColor = 'green';\n        if(this.panel.chartData[i].maxThreshold !== null){\n          if(parseInt(this.panel.chartData[i].data[this.panel.chartData[i].data.length - 1][1]) > parseInt(this.panel.chartData[i].maxThreshold)){\n            statusColor = 'blue';\n          }\n        }\n        if(this.panel.chartData[i].minThreshold !== null){\n          if(parseInt(this.panel.chartData[i].data[this.panel.chartData[i].data.length - 1][1]) < parseInt(this.panel.chartData[i].minThreshold)){\n            statusColor = 'red';\n          }\n        }\n        if(colors[i]){\n          statBar += \"<span style = margin-right:3px;display:inline-block;border-radius:5px;margin-top:8px;background-color:\"+statusColor+\";width:12px;height:12px></span></span>\"\n          statBar += \"<span class = 'stat' style = color:\"+String(colors[i]).replace(/\\s+/g, '');\n          statBar += \"><span style = display:inline-block;margin-top:5px;background-color:\"+ String(this.panel.chartData[i].color).replace(/\\s+/g, '') +\";width:12px;height:12px;margin-right:3px></span>\"\n\n          statBar += \"<alias>\" + this.panel.chartData[i].label + \"</alias>: <b>\" + this.panel.chartData[i].data[this.panel.chartData[i].data.length - 1][1] + \"</b>     \"\n\n        }else {\n          statBar += \"<span style = margin-right:3px;display:inline-block;border-radius:5px;margin-top:8px;background-color:\"+statusColor+\";width:12px;height:12px></span></span>\"\n          statBar += \"<span class = 'stat' style = color:white><span style = display:inline-block;margin-top:5px;background-color:\"+ String(this.panel.chartData[i].color).replace(/\\s+/g, '') +\";width:12px;height:12px;margin-right:3px></span>\"\n\n          statBar += \"<alias>\" + this.panel.chartData[i].label + \"</alias>: <b>\" + this.panel.chartData[i].data[this.panel.chartData[i].data.length - 1][1] + \"</b>     \"\n\n        }\n      }\n      var self = this;\n      $(\"#statusbar\").html('<center>' + statBar + '</center>')\n\n      $(\".stat\").click(function(){\n        $placeHolder.empty();\n\n        var state = this;\n        var allChosen = true;\n        var selected = false;\n        if($(state).css('color')==='rgb(255, 255, 255)'){\n          selected = true;\n        }\n        $(\"#statusbar\").find(\".stat\").each(function(){\n          if($(this).css('color')!=='rgb(255, 255, 255)'){\n            allChosen = false;\n          }\n        })\n        $(\"#statusbar\").find(\".stat\").each(function(){\n          if(allChosen){\n            if(this !== state){\n              $(this).css({color:'rgb(128, 128, 128)'})\n            } else {\n              $(this).css({color:'rgb(255, 255, 255)'})\n            }\n          } else {\n            if(selected){\n              $(this).css({color:'rgb(255, 255, 255)'})\n            } else {\n              if(this !== state){\n\n                $(this).css({color:'rgb(128, 128, 128)'})\n              } else {\n\n\n                $(this).css({color:'rgb(255, 255, 255)'})\n              }\n            }\n          }\n        })\n        if(selected && !allChosen){\n          self.panel.showAll = true;\n          if(self.panel.graphChoice === 'gauge'){\n            var data = [];\n            for(var i = 0; i < self.panel.chartData.length; i++){\n              data.push({\n                label:self.panel.chartData[i].label,\n                data:self.panel.chartData[i].currentValue,\n                gauges:self.panel.chartData[i].gauges,\n              })\n            }\n            $placeHolder.height(height).css('width','100%').plot(data,self.panel.graphOptions);\n          } else {\n            $placeHolder.height(height).css('width','100%').plot(self.panel.chartData,self.panel.graphOptions);\n          }\n        } else {\n          self.panel.showAll = false;\n          self.findStat($(state).find(\"alias\").html());\n          if(self.panel.graphChoice === 'gauge'){\n            var data = {\n              label:self.panel.singleSet.label,\n              data:self.panel.singleSet.currentValue,\n              gauges:self.panel.singleSet.gauges\n            };\n            $placeHolder.height(height).css('width','100%').plot([data],self.panel.graphOptions);\n          } else {\n            $placeHolder.height(height).css('width','100%').plot([self.panel.singleSet],self.panel.graphOptions);\n          }\n        }\n      })\n\n\n\n      if(!_.isEmpty(this.panel.singleSet) && !this.panel.showAll){\n        if(this.panel.graphChoice === 'gauge'){\n          var data = {\n            label:self.panel.singleSet.label,\n            data:self.panel.singleSet.currentValue,\n            gauges:self.panel.singleSet.gauges\n          };\n          $placeHolder.height(height).css('width','100%').plot([data],self.panel.graphOptions);\n        } else {\n          $placeHolder.height(height).css('width','100%').plot([self.panel.singleSet],self.panel.graphOptions);\n        }\n      } else {\n        //$placeHolder.height(height).css('width','100%').plot(this.panel.chartData,this.panel.graphOptions);\n        if(this.panel.graphChoice === 'gauge'){\n          var data = [];\n          for(var i = 0; i < self.panel.chartData.length; i++){\n            data.push({\n              label:self.panel.chartData[i].label,\n              data:self.panel.chartData[i].currentValue,\n              gauges:self.panel.chartData[i].gauges,\n            })\n          }\n          $placeHolder.height(height).css('width','100%').plot(data,self.panel.graphOptions);\n        } else {\n          $placeHolder.height(height).css('width','100%').plot(self.panel.chartData,self.panel.graphOptions);\n        }\n      }\n      var prevPoint = null;\n      $placeHolder.bind(\"plothover\", function(event,pos,item){\n        if(item){\n\n          if (prevPoint !== item.dataIndex){\n            prevPoint = item.dataIndex;\n            var color = String(item.series.color).replace(/\\s+/g, '');\n            var div = \"<span style = display:inline-block;margin-bottom:2px;border-radius:15px;background-color:\"+color+\";width:20px;height:5px></span>  \"\n\n            var status = \"\";\n            if(item.datapoint[1] < item.series.minThreshold){\n              status = \"<div style = background-color:red;border-radius:7px;line-height:14px><center style = 'font-size:12px'>Status: Below!</center></div>\"\n            } else if(item.series.maxThreshold !== null && item.datapoint[1] > item.series.maxThreshold){\n              status = \"<div style = background-color:blue;border-radius:7px;line-height:14px><center style = 'font-size:12px'>Status: Above!</center></div>\"\n            } else if(item.series.minThreshold !== null || item.series.maxThreshold !== null){\n              status = \"<div style = background-color:green;border-radius:7px;line-height:14px><center style = 'font-size:12px'>Status: Ok</center></div>\"\n            }\n\n            $('#tooltip').html(div + item.series.label + \": \" + '<b>' + item.datapoint[1] + '  </b>' + status)\n            .css({\n              position:'absolute',\n              top:item.pageY - 50,\n              left:item.pageX,\n              border: '1px solid #000',\n              'border-radius':'7px',\n              \"background-color\": '#000',\n              padding: '2px'\n            })\n            .fadeIn(200)\n          }\n        } else {\n          $('#tooltip').hide();\n          prevPoint = null;\n        }\n      })\n\n      if (this.panel.bgColor) {\n        $panelContainer.css('background-color', this.panel.bgColor);\n      } else {\n        $panelContainer.css('background-color', '');\n      }\n\n    });\n  }\n}\n\nSingleStatPlusCtrl.templateUrl = 'module.html';\n"]}